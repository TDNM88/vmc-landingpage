<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xóa Nền Ảnh</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta.3/css/all.min.css">
    <style>
        /* CSS cho nút */
        .btn {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .error-message {
            color: red;
            margin-top: 20px;
        }

        #result {
            margin-top: 20px;
        }

        #processedImage {
            max-width: 100%;
            height: auto;
            display: none;
        }
    </style>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="/index.html"><i class="fas fa-home"></i><span>Trang chủ</span></a></li>
                <li><a href="vmc.html"><i class="fas fa-project-diagram"></i><span>Dự án VMC</span></a></li>
                <li><a href="mkt.html"><i class="fas fa-bullhorn"></i><span>Dịch vụ Marketing</span></a></li>
                <li><a href="projects.html"><i class="fas fa-th-large"></i><span>Các ứng dụng</span></a></li>
                <li><a href="aig.html"><i class="fas fa-robot"></i><span>AIGC</span></a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="overlay">
                <div class="container">
                    <h1>Tải Ảnh Lên và Xóa Nền</h1>
                    <input type="file" id="imageUpload" accept="image/*">
                    <button id="uploadButton" class="btn">Tải lên và Xử lý</button>
                    <div id="result">
                        <h2>Ảnh đã xử lý:</h2>
                        <img id="processedImage" src="" alt="Processed Image">
                    </div>
                    <div id="error" class="error-message"></div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 TDN-M. Bản quyền thuộc về TDN-M. Website đang trong quá trình xây dựng, nếu có thắc mắc cần giải đáp, vui lòng kết nối với chúng tôi qua Super Care 247 bằng cách nhấn nút bên phải màn hình</p>
        </div>
    </footer>

    <script type="module">
        import { Client } from "@gradio/client";

        document.getElementById('uploadButton').addEventListener('click', async () => {
            const fileInput = document.getElementById('imageUpload');
            const file = fileInput.files[0];
            const errorDiv = document.getElementById('error');
            const processedImage = document.getElementById('processedImage');

            // Reset error message and processed image
            errorDiv.textContent = '';
            processedImage.style.display = 'none';

            if (!file) {
                errorDiv.textContent = 'Vui lòng chọn một ảnh để tải lên.';
                return;
            }

            try {
                const client = await Client.connect("TDN-M/Xoanenanh");
                const result = await client.predict("/predict", { image: file });

                if (result.data) {
                    processedImage.src = result.data;
                    processedImage.style.display = 'block';
                } else {
                    throw new Error('Không nhận được dữ liệu từ API.');
                }
            } catch (error) {
                console.error('Error:', error);
                errorDiv.textContent = 'Đã xảy ra lỗi trong quá trình xử lý ảnh: ' + error.message;
            }
        });
    </script>
</body>
</html>